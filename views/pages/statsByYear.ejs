<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Thống kê theo năm</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="min-h-screen flex flex-col bg-gray-100">
  <%- include('../partials/header') %>
  <%- include('../partials/sidebar') %>
  <main class="flex-grow p-6">
    <div class="max-w-2xl mx-auto bg-white p-6 rounded shadow">
      <h1 class="text-2xl font-bold mb-4 text-center">Thống kê theo năm</h1>
      <form method="POST" action="/thongke/nam" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <input type="text" name="serialnumber" placeholder="Serial Number" class="border px-3 py-2 rounded" required />
        <input type="password" name="access_token" placeholder="Access Token" class="border px-3 py-2 rounded" required />
        <select name="type" class="border px-3 py-2 rounded" required>
          <option value="PDF">PDF</option>
          <option value="XML">XML</option>
        </select>
        <input type="number" name="year" min="2000" max="2100" placeholder="Năm" class="border px-3 py-2 rounded" required />
        <button type="submit" class="col-span-full bg-blue-500 text-white py-2 rounded hover:bg-blue-600">Thống kê</button>
      </form>
      <% if (result) { %>
        <% if (result.error) { %>
          <div class="bg-red-100 text-red-700 p-4 rounded shadow">
            <p><%= result.error %></p>
          </div>
        <% } else { %>
          <div class="overflow-x-auto">
            <table class="min-w-full bg-white border border-gray-300 rounded">
              <thead>
                <tr>
                  <th class="border px-4 py-2">Tháng</th>
                  <th class="border px-4 py-2">Số lượng ký</th>
                </tr>
              </thead>
              <tbody>
                <% result.stats.forEach(row => { %>
                  <tr>
                    <td class="border px-4 py-2"><%= row.month %>/<%= result.year %></td>
                    <td class="border px-4 py-2"><%= row.count %></td>
                  </tr>
                <% }) %>
              </tbody>
            </table>
          </div>
        <% } %>
      <% } %>
    </div>
  </main>
  <%- include('../partials/footer') %>
</body>
</html>